{"version":3,"sources":["pages/user/login/index.js","pages/user/register/index.js","pages/user/index.js","../node_modules/querystring-es3/index.js","../node_modules/querystring-es3/decode.js","../node_modules/querystring-es3/encode.js"],"names":["Login","props","React","useEffect","document","cookie","username","qs","parse","split","nameRef","current","value","useRef","passwordRef","className","ref","type","onClick","params","password","axios","post","stringify","then","res","alert","data","msg","state","PubSub","publish","date","Date","setTime","getTime","token","toGMTString","history","push","err","console","log","Register","rePasswordRef","User","path","component","exports","decode","require","encode","hasOwnProperty","obj","prop","Object","prototype","call","module","sep","eq","options","length","regexp","maxKeys","len","i","kstr","vstr","k","v","x","replace","idx","indexOf","substr","decodeURIComponent","isArray","Array","xs","toString","stringifyPrimitive","isFinite","name","undefined","map","objectKeys","ks","encodeURIComponent","join","f","keys","key"],"mappings":"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","file":"static/js/6.15ffe49f.chunk.js","sourcesContent":["import React from 'react'\r\nimport './index.css'\r\nimport axios from 'axios'\r\nimport qs from 'querystring'\r\nimport PubSub from 'pubsub-js'\r\nexport default function Login(props) {\r\n    React.useEffect(()=>{\r\n        if(document.cookie!==''){\r\n            const {username}=qs.parse(document.cookie.split(';')[0])\r\n            nameRef.current.value=username\r\n        }\r\n    },[])\r\n    const nameRef=React.useRef()\r\n    const passwordRef=React.useRef()\r\n    let clickRegister=()=>{\r\n        const params={username:nameRef.current.value,password:passwordRef.current.value}\r\n        if(params.username===''){\r\n            alert('用户名不能为空')\r\n            return \r\n        }\r\n        if(params.password===''){\r\n         alert('密码不能为空')\r\n         return \r\n     }\r\n        axios.post('http://aays.top:4000/user/login',qs.stringify(params)).then(res=>{\r\n            alert(res.data.msg)\r\n            if(res.data.state==='success'){\r\n                PubSub.publish('HasLogin',true)\r\n                PubSub.publish('UserName',res.data.username)\r\n                let date=new Date()\r\n                // 获取时间戳并加上过期时间\r\n                date.setTime(date.getTime()+60000*60)\r\n                document.cookie=`username=${params.username}&token=${res.data.token};expires=${date.toGMTString()}`\r\n                props.history.push('/home')\r\n            }\r\n        },\r\n        err=>{\r\n            console.log(err);\r\n        }\r\n        )\r\n    }\r\n    return (\r\n        <div className='user-register'>\r\n            <div className='user-title'>登录</div>\r\n        <div className='name-input'>用户名：<input ref={nameRef} type='text' className='user-input'></input></div>\r\n           <div className='password-input'>密码：<input ref={passwordRef} type='password' className='user-input'></input></div>\r\n           <div className='user-btn'> <button onClick={clickRegister}>登录</button></div>\r\n        </div>\r\n    )\r\n}\r\n","import axios from 'axios'\r\nimport React from 'react'\r\nimport qs from 'querystring'\r\nimport './index.css'\r\nexport default function Register(props) {\r\n    const nameRef=React.useRef()\r\n    const passwordRef=React.useRef()\r\n    const rePasswordRef=React.useRef()\r\n    const clickRegister=()=>{\r\n        const params={username:nameRef.current.value,password:passwordRef.current.value}\r\n       if(passwordRef.current.value!==rePasswordRef.current.value){\r\nalert('两次输入的密码不一致！')\r\nreturn \r\n       }\r\n       if(params.username===''){\r\n           alert('用户名不能为空')\r\n           return \r\n       }\r\n       if(params.password===''){\r\n        alert('密码不能为空')\r\n        return \r\n    }\r\n        axios.post('http://aays.top:4000/user/register',qs.stringify(params)).then(\r\nres=>{\r\n    nameRef.current.value=passwordRef.current.value=rePasswordRef.current.value=''\r\n    alert(res.data)\r\n    if(res.data==='注册成功'){\r\n        props.history.push('/user/login')\r\n    }\r\n},\r\nerr=>{\r\n    alert('注册失败')\r\n    console.log('注册失败',err);\r\n}\r\n        )\r\n    }\r\n    return (\r\n        <div className='user-register'>\r\n            <div className='user-title'>注册</div>\r\n        <div className='name-input'>用户名：<input ref={nameRef} type='text' className='user-input'></input></div>\r\n           <div className='password-input'>密码：<input ref={passwordRef} type='password' className='user-input'></input></div>\r\n           <div className='re-Password-input'>重复密码：<input ref={rePasswordRef} type='password' className='user-input'></input></div>\r\n          <div className='user-btn'> <button onClick={clickRegister}>注册</button></div>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport {Link,Route} from 'react-router-dom'\r\nimport Login from './login'\r\nimport Register from './register'\r\nimport {Menu} from 'antd'\r\nimport './index.css'\r\nexport default function User() {\r\n    return (\r\n        <div className='user'>\r\n<Route path='/user/login' component={Login}/>\r\n<Route path='/user/register' component={Register}/>\r\n        </div>\r\n    )\r\n}\r\n","'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return map(objectKeys(obj), function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (isArray(obj[k])) {\n        return map(obj[k], function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nfunction map (xs, f) {\n  if (xs.map) return xs.map(f);\n  var res = [];\n  for (var i = 0; i < xs.length; i++) {\n    res.push(f(xs[i], i));\n  }\n  return res;\n}\n\nvar objectKeys = Object.keys || function (obj) {\n  var res = [];\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n  }\n  return res;\n};\n"],"sourceRoot":""}