{"version":3,"sources":["pages/message/index.js"],"names":["TextArea","Message","React","useState","text","setText","loveBgc","setloveBgc","messageContent","setMessageContent","useEffect","axios","get","then","res","data","reverse","err","console","log","className","rows","onChange","e","target","value","type","onClick","post","qs","stringify","message","alert","LeaveMessage","block","map","item","index","id","twoToneColor","style","backgroundColor","love"],"mappings":"sSAMQA,E,IAAAA,SACO,SAASC,IAAW,IAAD,EACTC,IAAMC,SAAS,IADN,mBACvBC,EADuB,KAClBC,EADkB,OAEHH,IAAMC,SAAS,IAFZ,mBAEvBG,EAFuB,KAEfC,EAFe,OAqCWL,IAAMC,SAAS,IArC1B,mBAqCvBK,EArCuB,KAqCRC,EArCQ,KA+C9B,OATAP,IAAMQ,WAAU,WACZC,IAAMC,IAAI,qCAAqCC,MAAK,SAAAC,GAChDL,EAAkBK,EAAIC,KAAKC,cAE/B,SAAAC,GACIC,QAAQC,IAAI,6CAAUF,QAG5B,IAEE,sBAAKG,UAAU,UAAf,UACI,sBAAMA,UAAU,gBAAhB,UACF,cAACpB,EAAD,CAAUqB,KAAM,EAAIC,SA/CT,SAACC,GACdlB,EAAQkB,EAAEC,OAAOC,QA8C2BA,MAAOrB,IACjD,mBAAQsB,KAAK,UAAUC,QAAS,YA7CnB,SAACvB,GACN,KAAPA,EACCO,IAAMiB,KAAK,oCAAoCC,IAAGC,UAAU,CAACC,QAAQ3B,KAAQS,MAAK,SAAAC,GAC9EkB,MAAM,4BACNrB,IAAMC,IAAI,qCAAqCC,MAAK,SAAAC,GAC5CL,EAAkBK,EAAIC,KAAKC,WAC3BX,EAAQ,OAEZ,SAAAY,GACIC,QAAQC,IAAI,6CAAUF,SAIlC,SAAAA,GACIe,MAAM,+BAIVA,MAAM,wCA2B8BC,CAAa7B,IAAQgB,UAAU,aAAac,OAAK,EAAvF,yCAKA,uBACA,uBACA,6BAEI1B,EAAe2B,KAAI,SAACC,EAAKC,GACrB,OACA,6BACd,sBAAKjB,UAAU,kBAAf,UACAgB,EAAKL,QACN,sBAAKX,UAAU,eAAf,UAA8B,sBAAMO,QAAS,WAtC5B,IAACW,IAsC0CF,EAAKE,GApC/C,KAAVhC,GACCC,EAAW,OACXI,IAAMiB,KAAN,mDAAuDU,EAAvD,wBAEA/B,EAAW,IACXI,IAAMiB,KAAN,mDAAuDU,EAAvD,wBA+BqB,SAAyC,cAAC,IAAD,CAAcC,aAAa,UAAUC,MAAO,CAACC,gBAAgBnC,OAApI,IAAwJ8B,EAAKM,YAHrIL","file":"static/js/9.36ed2358.chunk.js","sourcesContent":["import React from 'react'\r\nimport './index.css'\r\nimport { Input,Button } from 'antd';\r\nimport axios from 'axios'\r\nimport {HeartTwoTone} from '@ant-design/icons';\r\nimport qs from 'querystring'\r\nconst { TextArea } = Input;\r\nexport default function Message() {\r\n    const [text,setText]=React.useState('')\r\n    const [loveBgc,setloveBgc]=React.useState('')\r\n    const textChange=(e)=>{\r\n        setText(e.target.value)\r\n    }\r\n    const LeaveMessage=(text)=>{\r\n        if(text!==''){\r\n            axios.post('http://aays.top:4000/board/insert',qs.stringify({message:text})).then(res=>{\r\n                alert('留言成功')\r\n                axios.get('http://aays.top:4000/board/search').then(res=>{\r\n                        setMessageContent(res.data.reverse())\r\n                        setText('')\r\n                    },\r\n                    err=>{\r\n                        console.log('请求数据库失败',err);\r\n                    }\r\n                    )\r\n            },\r\n            err=>{\r\n                alert('留言失败')\r\n            }\r\n            ) \r\n        }else{\r\n            alert('输入不能为空')\r\n        }\r\n    }\r\n    const Clicklove=(id)=>{\r\n        \r\n        if(loveBgc===''){\r\n            setloveBgc('red')\r\n            axios.post(`http://aays.top:4000/board/updatelove?id=${id}&option=increment`)\r\n        }else{\r\n            setloveBgc('')\r\n            axios.post(`http://aays.top:4000/board/updatelove?id=${id}&option=decrement`)\r\n        }\r\n    }\r\n    const [messageContent,setMessageContent]=React.useState([])\r\n    React.useEffect(()=>{\r\n        axios.get('http://aays.top:4000/board/search').then(res=>{\r\n            setMessageContent(res.data.reverse())\r\n        },\r\n        err=>{\r\n            console.log('请求数据库失败',err);\r\n        }\r\n        )\r\n    },[])\r\n    return (\r\n        <div className='message'>\r\n            <div  className='message-input'>\r\n          <TextArea rows={5}  onChange={textChange} value={text}/>\r\n          <Button type=\"primary\" onClick={( )=>{LeaveMessage(text)}} className='search-btn' block>\r\n      发表留言\r\n    </Button>\r\n          </div>\r\n    \r\n          <br />\r\n          <br />\r\n          <ul>\r\n          {\r\n              messageContent.map((item,index)=>{\r\n                  return (\r\n                  <li key={index}>\r\n    <div className='message-content'>\r\n   {item.message}\r\n   <div className='message-love'><span onClick={()=>{Clicklove(item.id)}}><HeartTwoTone twoToneColor=\"#eb2f96\" style={{backgroundColor:loveBgc}}/></span> {item.love}</div>\r\n</div>\r\n                  </li>\r\n                  )\r\n              })\r\n          }\r\n      </ul>\r\n        </div>\r\n    )\r\n}\r\n"],"sourceRoot":""}