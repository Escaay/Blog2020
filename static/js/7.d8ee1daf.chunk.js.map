{"version":3,"sources":["pages/user/login/index.js","pages/user/register/index.js","pages/user/index.js"],"names":["Login","props","React","useEffect","document","cookie","qs","parse","split","username","password","nameRef","current","value","passwordRef","useRef","className","ref","type","onClick","params","axios","post","stringify","then","res","alert","data","msg","state","PubSub","publish","date","Date","setTime","getTime","toGMTString","history","push","err","console","log","Register","rePasswordRef","User","path","component"],"mappings":"kSAKe,SAASA,EAAMC,GAC1BC,IAAMC,WAAU,WACZ,GAAqB,KAAlBC,SAASC,OAAY,CAAC,IAAD,EACMC,IAAGC,MAAMH,SAASC,OAAOG,MAAM,KAAK,IAAvDC,EADa,EACbA,SAASC,EADI,EACJA,SAChBC,EAAQC,QAAQC,MAAMJ,EACtBK,EAAYF,QAAQC,MAAMH,KAEhC,IACF,IAAMC,EAAQT,IAAMa,SACdD,EAAYZ,IAAMa,SAmBxB,OACI,sBAAKC,UAAU,gBAAf,UACI,qBAAKA,UAAU,aAAf,0BACJ,sBAAKA,UAAU,aAAf,qCAAgC,uBAAOC,IAAKN,EAASO,KAAK,OAAOF,UAAU,kBACxE,sBAAKA,UAAU,iBAAf,+BAAmC,uBAAOC,IAAKH,EAAaI,KAAK,WAAWF,UAAU,kBACtF,sBAAKA,UAAU,WAAf,cAA2B,wBAAQG,QAvBxB,WACd,IAAMC,EAAO,CAACX,SAASE,EAAQC,QAAQC,MAAMH,SAASI,EAAYF,QAAQC,OAC1EQ,IAAMC,KAAK,kCAAkChB,IAAGiB,UAAUH,IAASI,MAAK,SAAAC,GAEpE,GADAC,MAAMD,EAAIE,KAAKC,KACK,YAAjBH,EAAIE,KAAKE,MAAkB,CAC1BC,IAAOC,QAAQ,YAAW,GAC1BD,IAAOC,QAAQ,WAAWN,EAAIE,KAAKlB,UACnC,IAAIuB,EAAK,IAAIC,KACbD,EAAKE,QAAQF,EAAKG,UAAU,KAC5B/B,SAASC,OAAT,mBAA4Be,EAAOX,SAAnC,qBAAwDW,EAAOV,SAA/D,oBAAmFsB,EAAKI,eACxFnC,EAAMoC,QAAQC,KAAK,aAG3B,SAAAC,GACIC,QAAQC,IAAIF,OASc,gC,OClCvB,SAASG,IACpB,IAAM/B,EAAQT,IAAMa,SACdD,EAAYZ,IAAMa,SAClB4B,EAAczC,IAAMa,SAkB1B,OACI,sBAAKC,UAAU,gBAAf,UACI,qBAAKA,UAAU,aAAf,0BACJ,sBAAKA,UAAU,aAAf,qCAAgC,uBAAOC,IAAKN,EAASO,KAAK,OAAOF,UAAU,kBACxE,sBAAKA,UAAU,iBAAf,+BAAmC,uBAAOC,IAAKH,EAAaI,KAAK,WAAWF,UAAU,kBACtF,sBAAKA,UAAU,oBAAf,2CAAwC,uBAAOC,IAAK0B,EAAezB,KAAK,WAAWF,UAAU,kBAC9F,sBAAKA,UAAU,WAAf,cAA2B,wBAAQG,QAvBrB,WAChB,IAAMC,EAAO,CAACX,SAASE,EAAQC,QAAQC,MAAMH,SAASI,EAAYF,QAAQC,OACxEC,EAAYF,QAAQC,QAAQ8B,EAAc/B,QAAQC,MAIpDQ,IAAMC,KAAK,qCAAqChB,IAAGiB,UAAUH,IAASI,MAC9E,SAAAC,GACId,EAAQC,QAAQC,MAAMC,EAAYF,QAAQC,MAAM8B,EAAc/B,QAAQC,MAAM,GAC5Ea,MAAMD,EAAIE,SAEd,SAAAY,GACIb,MAAM,4BACNc,QAAQC,IAAI,2BAAOF,MAVvBb,MAAM,uEAoB+B,gC,OCzBtB,SAASkB,IACpB,OACI,sBAAK5B,UAAU,OAAf,UACR,cAAC,IAAD,CAAO6B,KAAK,cAAcC,UAAW9C,IACrC,cAAC,IAAD,CAAO6C,KAAK,iBAAiBC,UAAWJ,S","file":"static/js/7.d8ee1daf.chunk.js","sourcesContent":["import React from 'react'\r\nimport './index.css'\r\nimport axios from 'axios'\r\nimport qs from 'querystring'\r\nimport PubSub from 'pubsub-js'\r\nexport default function Login(props) {\r\n    React.useEffect(()=>{\r\n        if(document.cookie!==''){\r\n            const {username,password}=qs.parse(document.cookie.split(';')[0])\r\n            nameRef.current.value=username\r\n            passwordRef.current.value=password\r\n        }\r\n    },[])\r\n    const nameRef=React.useRef()\r\n    const passwordRef=React.useRef()\r\n    let clickRegister=()=>{\r\n        const params={username:nameRef.current.value,password:passwordRef.current.value}\r\n        axios.post('http://aays.top:4000/user/login',qs.stringify(params)).then(res=>{\r\n            alert(res.data.msg)\r\n            if(res.data.state==='success'){\r\n                PubSub.publish('HasLogin',true)\r\n                PubSub.publish('UserName',res.data.username)\r\n                let date=new Date()\r\n                date.setTime(date.getTime()+60000*0.5)\r\n                document.cookie=`username=${params.username}&password=${params.password};expires=${date.toGMTString()}`\r\n                props.history.push('/home')\r\n            }\r\n        },\r\n        err=>{\r\n            console.log(err);\r\n        }\r\n        )\r\n    }\r\n    return (\r\n        <div className='user-register'>\r\n            <div className='user-title'>登录</div>\r\n        <div className='name-input'>用户名：<input ref={nameRef} type='text' className='user-input'></input></div>\r\n           <div className='password-input'>密码：<input ref={passwordRef} type='password' className='user-input'></input></div>\r\n           <div className='user-btn'> <button onClick={clickRegister}>登录</button></div>\r\n        </div>\r\n    )\r\n}\r\n","import axios from 'axios'\r\nimport React from 'react'\r\nimport qs from 'querystring'\r\nimport './index.css'\r\nexport default function Register() {\r\n    const nameRef=React.useRef()\r\n    const passwordRef=React.useRef()\r\n    const rePasswordRef=React.useRef()\r\n    const clickRegister=()=>{\r\n        const params={username:nameRef.current.value,password:passwordRef.current.value}\r\n       if(passwordRef.current.value!==rePasswordRef.current.value){\r\nalert('两次输入的密码不一致！')\r\nreturn \r\n       }\r\n        axios.post('http://aays.top:4000/user/register',qs.stringify(params)).then(\r\nres=>{\r\n    nameRef.current.value=passwordRef.current.value=rePasswordRef.current.value=''\r\n    alert(res.data)\r\n},\r\nerr=>{\r\n    alert('注册失败')\r\n    console.log('注册失败',err);\r\n}\r\n        )\r\n    }\r\n    return (\r\n        <div className='user-register'>\r\n            <div className='user-title'>注册</div>\r\n        <div className='name-input'>用户名：<input ref={nameRef} type='text' className='user-input'></input></div>\r\n           <div className='password-input'>密码：<input ref={passwordRef} type='password' className='user-input'></input></div>\r\n           <div className='re-Password-input'>重复密码：<input ref={rePasswordRef} type='password' className='user-input'></input></div>\r\n          <div className='user-btn'> <button onClick={clickRegister}>注册</button></div>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport {Link,Route} from 'react-router-dom'\r\nimport Login from './login'\r\nimport Register from './register'\r\nimport {Menu} from 'antd'\r\nimport './index.css'\r\nexport default function User() {\r\n    return (\r\n        <div className='user'>\r\n<Route path='/user/login' component={Login}/>\r\n<Route path='/user/register' component={Register}/>\r\n        </div>\r\n    )\r\n}\r\n"],"sourceRoot":""}