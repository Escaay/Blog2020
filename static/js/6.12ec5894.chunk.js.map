{"version":3,"sources":["components/search/index.js","pages/tool/Search/index.js","pages/tool/index.js"],"names":["Search","props","onSearch","searchRef","React","useRef","placeholder","ref","className","type","onClick","style","width","height","size","SearchPage","useState","bfr","setBfr","weather","setWeather","city","setCity","remark","setRemark","search","location","qs","parse","slice","tips","key","valueArr","current","value","split","waistline","sex","weight","axios","get","then","res","console","log","data","result","err","future","map","weatherItem","index","date","direct","temperature","Tool","mode","theme","inlineIndent","onSelect","item","history","push","clickMenu","defaultSelectedKeys","Item","path","component","to"],"mappings":"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","file":"static/js/6.12ec5894.chunk.js","sourcesContent":["import React,{Fragment} from 'react'\r\n// import { Input } from 'antd';\r\nimport {Button} from 'antd'\r\nimport './index.css'\r\nexport default function Search(props) {\r\n    const {onSearch}=props\r\n    const searchRef=React.useRef()\r\n//  function onSearch(props){\r\n    //    函数式组件没有this,也不用箭头函数\r\n    //    console.log(this);//undefined\r\n// console.log(props.onSearch);\r\n    // }\r\n    return (\r\n        <Fragment>\r\n       {/* <Input.Search placeholder=\"input search text\" onSearch={value => console.log(value)} enterButton /> */}\r\n       <input placeholder='请输入搜索内容' ref={searchRef} className='searchInput'></input><Button type=\"primary\" onClick={()=>{onSearch(searchRef)}} style={{width: '9vw',height: '5vh'}} size='small'>\r\n      查询\r\n    </Button>\r\n        </Fragment>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport Search from '../../../components/search'\r\nimport axios from 'axios'\r\nimport './index.css'\r\nimport qs from 'querystring'\r\nexport default function SearchPage(props) {\r\n    const [hasReq,setHasReq]=React.useState(false)\r\n    const [bfr,setBfr]=React.useState('')\r\n    const [weather,setWeather]=React.useState('')\r\n    const [city,setCity]=React.useState('')\r\n    const [remark,setRemark]=React.useState('')\r\n    // const {tips}=props.match.params  \r\n    const search=props.location.search\r\n    const {tips,key}= qs.parse(search.slice(1))\r\n    // const {tips}=props.location.state\r\n    // console.log(renderResult);\r\n    let onSearch=''\r\n    switch (key){\r\n        case 'bfr':\r\n         onSearch=(searchRef)=>{\r\n            const value=searchRef.current.value\r\n            const valueArr=value.split('，')\r\n            const waistline=(valueArr[2]*1)/2-11\r\n           const sex=valueArr[0]\r\n           const weight=valueArr[1]\r\n                    axios.get(`http://aays.top:4000/api1/bfr?key=c98916cc93a98448eb2ff45a8bfc3ac0&weight=${weight}&sex=${sex}&waistline=${waistline}`).then(\r\n                        res=>{\r\n                            console.log(res);\r\n                            setBfr(res.data.result.bfr)\r\n                            setRemark(res.data.result.remark)\r\n                            searchRef.current.value=''\r\n                        },err=>{\r\n                            console.log(err);\r\n                        })\r\n            }\r\n        break\r\n        case 'weather':\r\n            onSearch=(searchRef)=>{\r\n                const value=searchRef.current.value\r\n                // 在这里做了urlencode，链接到了后端被parse之后会重新变成中文，所以最好在后端处理数据\r\n                // const valueCode=encode(value)\r\n                        axios.get(`http://aays.top:4000/api1/weather?city=${value}`).then(\r\n                            res=>{\r\n                                setWeather(res.data.result.future)\r\n                                setCity(value)\r\n                                searchRef.current.value=''\r\n                            },err=>{\r\n                                console.log(err);\r\n                            })\r\n                }\r\n            break\r\ndefault:\r\n    break\r\n    }\r\n    \r\n    return (\r\n        <div>\r\n            <Search onSearch={onSearch}/>\r\n            <div className='search-tips'>提示：{tips}</div>\r\n            {\r\n                key==='bfr'?\r\n                <div className='search-result'>\r\n                        <ul>\r\n                            <li>体脂率：{bfr}</li>\r\n                            <li>体脂率评价：{remark}</li>\r\n                        </ul>\r\n                    </div>:\r\n                    ''\r\n            }\r\n            {\r\n                 key==='weather'?\r\n                 <div className='search-result'>\r\n                     {city}天气\r\n                     <ul>\r\n                       {\r\n                           weather!==''?\r\nweather.map((weatherItem,index)=>{\r\n    return (\r\n    <li key={weatherItem.date}>\r\n     <br></br>日期：{weatherItem.date}--风向：{weatherItem.direct}<br />温度：{weatherItem.temperature}--天气状况：{weatherItem.weather}\r\n    </li>\r\n    )\r\n\r\n}):''\r\n                       }\r\n                       </ul>\r\n                     </div>\r\n                     :''\r\n            }\r\n            {/* {\r\n                key==='bfr'?\r\n            <div className='search-result'>\r\n                    <ul>\r\n                        <li>体脂率：{bfr}</li>\r\n                        <li>体脂率评价：{remark}</li>\r\n                    </ul>\r\n                </div>:''\r\n}\r\n\r\n{\r\n     key==='weather'?\r\n     <div className='search-result'>\r\n             <ul>\r\n                 <li>天气</li>\r\n             </ul>\r\n         </div>:''\r\n} */}\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport './index.css'\r\nimport SearchPage from './Search'\r\nimport { Menu } from 'antd'\r\nimport {Route,Redirect} from 'react-router-dom'\r\nexport default  function Tool (props) {\r\n   function onSearch(){\r\n        console.log('onSearch');\r\n    }\r\n    function  clickMenu(item){\r\n           const {key}=item\r\n        switch (key){\r\n            case '1':\r\n                // props.history.push('/tool/search/请输入性别体重身高，中间用逗号隔开')\r\n                props.history.push('/tool/search/?tips=请输入性别体重身高，中间用逗号隔开&key=bfr')\r\n                // props.history.push('/tool/search',{tips:'请输入性别体重身高，中间用逗号隔开'})\r\n                break\r\n                case '2':\r\n                    // props.history.push('/tool/search/查询体脂率2')\r\n                    props.history.push('/tool/search/?tips=请输入城市名&key=weather')\r\n                    break\r\n                    case '3':\r\n                        // props.history.push('/tool/search/查询体脂率3')\r\n                        props.history.push('/tool/search/?tips=查询体脂率3&key=hh')\r\n                        break\r\n                        default:\r\n                            break\r\n        }\r\n    }\r\n   \r\n        return (\r\n            <div className='tool'>\r\n   <Menu mode=\"horizontal\" className='menu' style={{theme:'dark',inlineIndent:50}} onSelect={(item)=>{clickMenu(item)}} theme='dark' defaultSelectedKeys={['1']}>\r\n  <Menu.Item className='menu-item' key='1'>体脂率计算</Menu.Item>\r\n  <Menu.Item className='menu-item' key='2'>城市天气查询</Menu.Item>\r\n  <Menu.Item className='menu-item' key='3'>敬请期待</Menu.Item>\r\n</Menu>\r\n    {/* 路由Route在哪，组件就在哪 */}\r\n    <div className='menu-blank'></div>\r\n    {/* <div className='menu-search'><Route path='/tool/search/:tips' component={SearchPage}/></div> */}\r\n    <div className='menu-search'><Route path='/tool/search' component={SearchPage}/></div>\r\n    {/* <Redirect to='/tool/search/请输入性别体重身高，中间用逗号隔开'></Redirect>  */}\r\n    <Redirect to='/tool/search/?tips=请输入性别体重身高，中间用逗号隔开&key=bfr'></Redirect>\r\n    {/* <Redirect to={{pathname:'/tool/search',state:{tips:'请输入性别体重身高，中间用逗号隔开'}}}></Redirect> */}\r\n            </div>\r\n        )\r\n    }\r\n\r\n// export default withRouter(Tool)\r\n"],"sourceRoot":""}