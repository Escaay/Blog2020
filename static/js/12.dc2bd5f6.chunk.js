(this["webpackJsonpmy-blog"]=this["webpackJsonpmy-blog"]||[]).push([[12],{132:function(e,t,n){},137:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return m}));n(44);var a=n(16),s=n(15),c=(n(130),n(134)),o=n(0),i=n.n(o),r=(n(132),n(77)),u=n.n(r),l=n(143),b=n(78),f=n.n(b),j=n(8),d=n.n(j),h=n(1),p=c.a.TextArea;function m(e){var t=i.a.useState(""),n=Object(s.a)(t,2),c=n[0],o=n[1],r=i.a.useState(!1),b=Object(s.a)(r,2),j=b[0],m=b[1],g=i.a.useState(!0),v=Object(s.a)(g,2),O=v[0],x=v[1];i.a.useEffect((function(){var t=function(e,t){console.log(t,O),!1===t&&O&&m(t)};d.a.subscribe("HasLogin",t);var n=e.location.state||{},a=n.username,s=n.HasLogin;return s&&m(s),a&&o(a),function(){d.a.unsubscribe(t),x(!1)}}),[]);var y=i.a.useState([]),N=Object(s.a)(y,2),k=N[0],S=N[1],C=i.a.useState(""),w=Object(s.a)(C,2),E=w[0],H=w[1],J=i.a.useState(""),L=Object(s.a)(J,2),T=L[0],A=L[1],q=function(e){u.a.get("http://aays.top:4000/board/search").then((function(t){S(t.data.reverse()),e()}),(function(e){console.log("\u67e5\u8be2\u5931\u8d25")}))};return i.a.useEffect((function(){u.a.get("http://aays.top:4000/board/search").then((function(e){S(e.data.reverse())}),(function(e){console.log("\u8bf7\u6c42\u6570\u636e\u5e93\u5931\u8d25",e)}))}),[]),Object(h.jsxs)("div",{className:"message",children:[Object(h.jsxs)("div",{className:"message-input",children:[Object(h.jsx)(p,{rows:5,onChange:function(e){H(e.target.value)},value:E}),Object(h.jsx)(a.a,{type:"primary",onClick:function(){!function(e){j?""!==e?u.a.post("http://aays.top:4000/board/insert",f.a.stringify({username:c,message:e})).then((function(){alert("\u7559\u8a00\u6210\u529f"),q((function(){H("")}))}),(function(e){alert("\u7559\u8a00\u5931\u8d25")})):alert("\u8f93\u5165\u4e0d\u80fd\u4e3a\u7a7a"):alert("\u8bf7\u5148\u767b\u5f55")}(E)},className:"search-btn",block:!0,children:"\u53d1\u8868\u7559\u8a00"})]}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),Object(h.jsx)("ul",{children:k.map((function(e,t){return Object(h.jsx)("li",{children:Object(h.jsxs)("div",{className:"message-content",children:[Object(h.jsxs)("div",{className:"message-content-user",children:[e.username,"\uff1a"]}),Object(h.jsx)("div",{className:"message-content-text",children:e.message}),Object(h.jsxs)("div",{className:"message-love",children:[Object(h.jsx)("span",{onClick:function(){var t;t=e.id,""===T?(A("red"),u.a.get("http://aays.top:4000/board/updatelove?id=".concat(t,"&option=increment")).then((function(){q((function(){}))}),(function(e){alert("\u70b9\u8d5e\u5931\u8d25")}))):(A(""),u.a.get("http://aays.top:4000/board/updatelove?id=".concat(t,"&option=decrement")).then((function(e){q((function(){}))}),(function(e){alert("\u53d6\u6d88\u70b9\u8d5e\u5931\u8d25")})))},children:Object(h.jsx)(l.a,{twoToneColor:"#eb2f96",style:{backgroundColor:T}})})," ",e.love]})]})},t)}))})]})}}}]);
//# sourceMappingURL=12.dc2bd5f6.chunk.js.map