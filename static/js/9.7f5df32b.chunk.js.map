{"version":3,"sources":["pages/message/index.js"],"names":["TextArea","Message","React","useState","text","setText","likeBgc","setLikeBgc","handleClickLike","axios","post","messageContent","setMessageContent","useEffect","get","then","res","data","reverse","err","console","log","className","rows","onChange","e","target","value","type","onClick","qs","stringify","message","alert","LeaveMessage","block","map","item","index","twoToneColor","style","backgroundColor","like"],"mappings":"sSAMQA,E,IAAAA,SACO,SAASC,IAAW,IAAD,EACTC,IAAMC,SAAS,IADN,mBACvBC,EADuB,KAClBC,EADkB,OAEHH,IAAMC,SAAS,IAFZ,mBAEvBG,EAFuB,KAEfC,EAFe,KA0BxBC,EAAgB,WAClBC,IAAMC,OAEFH,EADS,KAAVD,EACY,MAEA,KA/BW,EAkCWJ,IAAMC,SAAS,IAlC1B,mBAkCvBQ,EAlCuB,KAkCRC,EAlCQ,KA4C9B,OATAV,IAAMW,WAAU,WACZJ,IAAMK,IAAI,qCAAqCC,MAAK,SAAAC,GAChDJ,EAAkBI,EAAIC,KAAKC,cAE/B,SAAAC,GACIC,QAAQC,IAAI,6CAAUF,QAG5B,IAEE,sBAAKG,UAAU,UAAf,UACI,sBAAMA,UAAU,gBAAhB,UACF,cAACtB,EAAD,CAAUuB,KAAM,EAAIC,SA5CT,SAACC,GACdpB,EAAQoB,EAAEC,OAAOC,QA2C2BA,MAAOvB,IACjD,mBAAQwB,KAAK,UAAUC,QAAS,YA1CnB,SAACzB,GACN,KAAPA,EACCK,IAAMC,KAAK,oCAAoCoB,IAAGC,UAAU,CAACC,QAAQ5B,KAAQW,MAAK,SAAAC,GAC9EiB,MAAM,4BACNxB,IAAMK,IAAI,qCAAqCC,MAAK,SAAAC,GAC5CJ,EAAkBI,EAAIC,KAAKC,cAE/B,SAAAC,GACIC,QAAQC,IAAI,6CAAUF,SAIlC,SAAAA,GACIc,MAAM,+BAIVA,MAAM,wCAyB8BC,CAAa9B,IAAQkB,UAAU,aAAaa,OAAK,EAAvF,yCAKA,uBACA,uBACA,6BAEIxB,EAAeyB,KAAI,SAACC,EAAKC,GACrB,OACA,6BACd,sBAAKhB,UAAU,kBAAf,UACAe,EAAKL,QACN,sBAAKV,UAAU,eAAf,UAA8B,sBAAMO,QAASrB,EAAf,SAAgC,cAAC,IAAD,CAAc+B,aAAa,UAAUC,MAAO,CAACC,gBAAgBnC,OAA3H,IAA+I+B,EAAKK,YAH5HJ","file":"static/js/9.7f5df32b.chunk.js","sourcesContent":["import React from 'react'\r\nimport './index.css'\r\nimport { Input,Button } from 'antd';\r\nimport axios from 'axios'\r\nimport {HeartTwoTone} from '@ant-design/icons';\r\nimport qs from 'querystring'\r\nconst { TextArea } = Input;\r\nexport default function Message() {\r\n    const [text,setText]=React.useState('')\r\n    const [likeBgc,setLikeBgc]=React.useState('')\r\n    const textChange=(e)=>{\r\n        setText(e.target.value)\r\n    }\r\n    const LeaveMessage=(text)=>{\r\n        if(text!==''){\r\n            axios.post('http://aays.top:4000/board/insert',qs.stringify({message:text})).then(res=>{\r\n                alert('留言成功')\r\n                axios.get('http://aays.top:4000/board/search').then(res=>{\r\n                        setMessageContent(res.data.reverse())\r\n                    },\r\n                    err=>{\r\n                        console.log('请求数据库失败',err);\r\n                    }\r\n                    )\r\n            },\r\n            err=>{\r\n                alert('留言失败')\r\n            }\r\n            ) \r\n        }else{\r\n            alert('输入不能为空')\r\n        }\r\n    }\r\n    const handleClickLike=()=>{\r\n        axios.post()\r\n        if(likeBgc===''){\r\n            setLikeBgc('red')\r\n        }else{\r\n            setLikeBgc('')\r\n        }\r\n    }\r\n    const [messageContent,setMessageContent]=React.useState([])\r\n    React.useEffect(()=>{\r\n        axios.get('http://aays.top:4000/board/search').then(res=>{\r\n            setMessageContent(res.data.reverse())\r\n        },\r\n        err=>{\r\n            console.log('请求数据库失败',err);\r\n        }\r\n        )\r\n    },[])\r\n    return (\r\n        <div className='message'>\r\n            <div  className='message-input'>\r\n          <TextArea rows={5}  onChange={textChange} value={text}/>\r\n          <Button type=\"primary\" onClick={( )=>{LeaveMessage(text)}} className='search-btn' block>\r\n      发表留言\r\n    </Button>\r\n          </div>\r\n    \r\n          <br />\r\n          <br />\r\n          <ul>\r\n          {\r\n              messageContent.map((item,index)=>{\r\n                  return (\r\n                  <li key={index}>\r\n    <div className='message-content'>\r\n   {item.message}\r\n   <div className='message-like'><span onClick={handleClickLike}><HeartTwoTone twoToneColor=\"#eb2f96\" style={{backgroundColor:likeBgc}}/></span> {item.like}</div>\r\n</div>\r\n                  </li>\r\n                  )\r\n              })\r\n          }\r\n      </ul>\r\n        </div>\r\n    )\r\n}\r\n"],"sourceRoot":""}